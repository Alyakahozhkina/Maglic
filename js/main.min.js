"use strict";const header=document.querySelector(".header");function scrolledHeader(){window.scrollY>50?header.classList.add("scrolled"):header.classList.remove("scrolled")}window.addEventListener("scroll",scrolledHeader);const menuBurger=header.querySelector(".menu__burger"),menuBody=header.querySelector(".menu__body"),burgerSvg=header.querySelector(".menu__burger-svg"),body=document.querySelector("body");function offset(e){const t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+o}}menuBurger.addEventListener("click",(function(){header.classList.toggle("active"),menuBurger.classList.toggle("active"),menuBody.classList.toggle("active"),burgerSvg.classList.toggle("active"),body.classList.toggle("fixed")})),header.addEventListener("click",(function(e){if(e.target.classList.contains("menu__link")){e.preventDefault(),this.classList.contains("active")&&menuBurger.click();let t=e.target.getAttribute("href"),o=offset(document.querySelector(t)).top;window.scrollTo({top:o-90,behavior:"smooth"})}}));const parallaxBlocks=document.querySelectorAll(".parallax");if(parallaxBlocks.length>0){function e(){let e=window.scrollY;parallaxBlocks.forEach((o=>{let n=offset(o).top,i=o.offsetHeight,s=o.dataset.speed,l=o.dataset.view;if(window.innerWidth<=1280&&(l=0),window.innerWidth<=1024&&(s-=1,s>=2&&(s=0)),window.innerWidth<=992&&(s=0),t(o)){let t=e-n,r=Math.round(t/i*100);o.style.backgroundPosition="center "+parseInt(r*s-l)+"px"}}))}function t(e){let t=e.getBoundingClientRect();return(t.height>0||t.width>0)&&t.bottom>=0&&t.right>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}window.addEventListener("scroll",e)}const achievementsBlock=document.querySelector(".achievements"),numbers=document.querySelectorAll(".numbers");if(numbers.length>0){function e(){numbers.forEach((t=>{let o=+t.innerHTML,n=+t.dataset.max,i=achievementsBlock.offsetHeight,s=offset(achievementsBlock).top,l=window.innerHeight-i/1.4;if(i>window.innerHeight&&(l=window.innerHeight-window.innerHeight/1.4),pageYOffset>s-l){window.removeEventListener("scroll",e),window.removeEventListener("resize",e),t.closest("._opacity").classList.add("show");let i=setInterval((function(){o+=+t.dataset.calc,t.innerHTML=o,o==n&&clearInterval(i)}),+t.dataset.speed)}}))}window.addEventListener("scroll",e),window.addEventListener("resize",e)}const tabs=document.querySelectorAll(".tabs__link"),tabsBlocks=document.querySelectorAll(".tabs__gallery");tabs.length>0&&tabs.forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const o=t.target.getAttribute("href").replace(/#/,"");e.classList.contains("active")||(tabs.forEach((e=>{e.classList.remove("active")})),tabsBlocks.forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),document.getElementById(o).classList.add("active"))}))})),tabs[0].click();const buttonUp=document.querySelector("#button-up");function buttonShow(){window.scrollY>700?buttonUp.classList.add("show"):buttonUp.classList.remove("show")}function buttonScrollTop(){window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",buttonShow),buttonUp.addEventListener("click",buttonScrollTop),new Swiper(".main-slider__swiper",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:1,initialSlide:0,loop:!0,loopedSlides:2,autoplay:{delay:5e3,disableOnInteraction:!1},speed:2e3,breakpoints:{320:{slidesPerView:1},480:{slidesPerView:1},992:{slidesPerView:1}}});const swiperComments=new Swiper(".reviews__slider",{pagination:{el:".swiper-pagination",clickable:!0},slidesPerView:3,initialSlide:0,loop:!0,centeredSlides:!0,autoplay:{delay:3e3,disableOnInteraction:!1},speed:2e3,slideToClickedSlide:!0,breakpoints:{320:{slidesPerView:1},576:{slidesPerView:3},992:{slidesPerView:3}}}),reviewsSliderBlock=document.querySelector(".reviews__slider"),commentsBlock=document.querySelector(".reviews__comments");function autoplayStart(){swiperComments.params.autoplay.disableOnInteraction="false",swiperComments.params.autoplay.delay=2e3,swiperComments.autoplay.start()}function autoplayStop(){swiperComments.autoplay.stop()}function addComment(){const e=document.querySelectorAll(".reviews__slide"),t=commentsBlock.querySelectorAll(".reviews__block-hidden");e.forEach((e=>{if(e.classList.contains("swiper-slide-active")){t.forEach((e=>{e.classList.remove("active")})),document.querySelector(e.dataset.number).classList.add("active")}}))}reviewsSliderBlock.addEventListener("mouseleave",autoplayStart),commentsBlock.addEventListener("mouseleave",autoplayStart),reviewsSliderBlock.addEventListener("mouseenter",autoplayStop),commentsBlock.addEventListener("mouseenter",autoplayStop),swiperComments.on("slideChangeTransitionStart",addComment),addComment(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}e.addEventListener("submit",(async function(o){o.preventDefault();let n=function(e){let o=0;return document.querySelectorAll("._required").forEach((e=>{var n;(n=e).parentElement.classList.remove("_error"),n.classList.remove("_error"),e.classList.contains("._email")?function(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}(e)&&(t(e),o++):""===e.value&&(t(e),o++)})),o}(),i=new FormData(e);if(0===n){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:i});if(t.ok){let o=await t.json();alert(o.message),e.reset(),e.classList.remove("_sending")}else e.classList.remove("_sending")}}))}));const blog=document.querySelector(".blog"),footer=document.querySelector(".footer");blog.addEventListener("click",(function(e){e.preventDefault()})),footer.addEventListener("click",(function(e){e.target.closest(".link-default")&&e.preventDefault()})),Fancybox.bind("[data-fancybox]",{hideScrollbar:!1,on:{init:()=>{console.log("открыто"),bodyLock()},destroy:()=>{console.log("закрыто"),bodyUnlock()}}});const lockPadding=document.querySelectorAll(".lock-padding");let unlock=!0;const timeout=500;function bodyLock(){const e=window.innerWidth-document.querySelector(".for__page").offsetWidth+"px";if(lockPadding.length>0)for(let t=0;t<lockPadding.length;t++){const o=lockPadding[t];o.classList.contains("button-up")?o.style.marginRight=e:o.style.paddingRight=e}body.style.paddingRight=e,body.classList.add("lock"),unlock=!1,setTimeout((function(){unlock=!0}),500)}function bodyUnlock(){setTimeout((function(){if(lockPadding.length>0)for(let e=0;e<lockPadding.length;e++){const t=lockPadding[e];t.classList.contains("button-up")?t.style.marginRight="0px":t.style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("lock")}),500),unlock=!1,setTimeout((function(){unlock=!0}),500)}