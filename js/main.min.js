"use strict";const header=document.querySelector(".header");function scrolledHeader(){window.scrollY>50?header.classList.add("scrolled"):header.classList.remove("scrolled")}window.addEventListener("scroll",scrolledHeader);const menuBurger=header.querySelector(".menu__burger"),menuBody=header.querySelector(".menu__body"),burgerSvg=header.querySelector(".menu__burger-svg"),body=document.querySelector("body");function offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}menuBurger.addEventListener("click",(function(){header.classList.toggle("active"),menuBurger.classList.toggle("active"),menuBody.classList.toggle("active"),burgerSvg.classList.toggle("active"),body.classList.toggle("fixed")})),header.addEventListener("click",(function(e){if(e.target.classList.contains("menu__link")){e.preventDefault(),this.classList.contains("active")&&menuBurger.click();let t=e.target.getAttribute("href"),n=offset(document.querySelector(t)).top;window.scrollTo({top:n-90,behavior:"smooth"})}}));const parallaxBlocks=document.querySelectorAll(".parallax");if(parallaxBlocks.length>0){function e(){let e=window.scrollY;parallaxBlocks.forEach((n=>{let o=offset(n).top,s=n.offsetHeight,i=n.dataset.speed,r=n.dataset.view;if(window.innerWidth<=1280&&(r=0),window.innerWidth<=1024&&(i-=1,i>=2&&(i=0)),window.innerWidth<=992&&(i=0),t(n)){let t=e-o,l=Math.round(t/s*100);n.style.backgroundPosition="center "+parseInt(l*i-r)+"px"}}))}function t(e){let t=e.getBoundingClientRect();return(t.height>0||t.width>0)&&t.bottom>=0&&t.right>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}window.addEventListener("scroll",e)}const achievementsBlock=document.querySelector(".achievements"),numbers=document.querySelectorAll(".numbers");if(numbers.length>0){function e(){numbers.forEach((t=>{let n=+t.innerHTML,o=+t.dataset.max,s=achievementsBlock.offsetHeight,i=offset(achievementsBlock).top,r=window.innerHeight-s/1.4;if(s>window.innerHeight&&(r=window.innerHeight-window.innerHeight/1.4),pageYOffset>i-r){window.removeEventListener("scroll",e),window.removeEventListener("resize",e),t.closest("._opacity").classList.add("show");let s=setInterval((function(){n+=+t.dataset.calc,t.innerHTML=n,n==o&&clearInterval(s)}),+t.dataset.speed)}}))}window.addEventListener("scroll",e),window.addEventListener("resize",e)}const tabs=document.querySelectorAll(".tabs__link"),tabsBlocks=document.querySelectorAll(".tabs__gallery");tabs.length>0&&tabs.forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const n=t.target.getAttribute("href").replace(/#/,"");e.classList.contains("active")||(tabs.forEach((e=>{e.classList.remove("active")})),tabsBlocks.forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),document.getElementById(n).classList.add("active"))}))})),tabs[0].click();const buttonUp=document.querySelector("#button-up");function buttonShow(){window.scrollY>700?buttonUp.classList.add("show"):buttonUp.classList.remove("show")}function buttonScrollTop(){window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",buttonShow),buttonUp.addEventListener("click",buttonScrollTop),new Swiper(".main-slider__swiper",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},slidesPerView:1,initialSlide:0,loop:!0,loopedSlides:2,autoplay:{delay:2e3,disableOnInteraction:!1},speed:2e3,breakpoints:{320:{slidesPerView:1},480:{slidesPerView:1},992:{slidesPerView:1}}});const swiperComments=new Swiper(".reviews__slider",{pagination:{el:".swiper-pagination",clickable:!0},slidesPerView:3,initialSlide:0,loop:!0,centeredSlides:!0,autoplay:{delay:2e3,disableOnInteraction:!1},speed:2e3,slideToClickedSlide:!0,breakpoints:{320:{slidesPerView:1},576:{slidesPerView:3},992:{slidesPerView:3}}}),reviewsSliderBlock=document.querySelector(".reviews__slider"),commentsBlock=document.querySelector(".reviews__comments");function autoplayStart(){swiperComments.params.autoplay.disableOnInteraction="false",swiperComments.params.autoplay.delay=2e3,swiperComments.autoplay.start()}function autoplayStop(){swiperComments.autoplay.stop()}function addComment(){const e=document.querySelectorAll(".reviews__slide"),t=commentsBlock.querySelectorAll(".reviews__block-hidden");e.forEach((e=>{if(e.classList.contains("swiper-slide-active")){t.forEach((e=>{e.classList.remove("active")})),document.querySelector(e.dataset.number).classList.add("active")}}))}reviewsSliderBlock.addEventListener("mouseleave",autoplayStart),commentsBlock.addEventListener("mouseleave",autoplayStart),reviewsSliderBlock.addEventListener("mouseenter",autoplayStop),commentsBlock.addEventListener("mouseenter",autoplayStop),swiperComments.on("slideChangeTransitionStart",addComment),addComment(),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}e.addEventListener("submit",(async function(n){n.preventDefault();let o=function(e){let n=0;return document.querySelectorAll("._required").forEach((e=>{var o;(o=e).parentElement.classList.remove("_error"),o.classList.remove("_error"),e.classList.contains("._email")?function(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}(e)&&(t(e),n++):""===e.value&&(t(e),n++)})),n}(),s=new FormData(e);if(0===o){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:s});if(t.ok){let n=await t.json();alert(n.message),e.reset(),e.classList.remove("_sending")}else alert("Ошибка"),e.classList.remove("_sending")}else alert("Required fields")}))}));